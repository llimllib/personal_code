<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
  <HEAD>
    <TITLE>Programming Challenge || kuro5hin.org</TITLE>
    <STYLE TYPE="text/css">
<!--
 .osdn{
   text-decoration: none;
   font-family: verdana, arial, helvetica, sans-serif;
   color: #eeeeee;
 }
 .header{
   text-decoration: none;
   color: #000;
 }
 .justified{
}
 a:hover.adlink { color: #006699; }
 a.adlink { color: #006699; }
-->
</style>


<LINK REL="icon" HREF="/images/tinyk5.png" TYPE="image/png">
<LINK REL="SHORTCUT ICON" HREF="/images/tinyk5.png">


    
</HEAD>

  <BODY bgcolor="#FFFFFF" text="#222222" LINK="#003767" ALINK="#c0c0c0" VLINK="#4185aa"
      marginwidth=0 marginheight=0 topmargin=0 leftmargin=0>

    <!-- Begin standard logo/sections header -->
    <!--Begin Header -->
<br>
<table border="0" cellpadding="0" cellspacing="0" width="98%" align="center">
        <tr valign="bottom">
                <td rowspan="3" width="299" valign="bottom"><a href="http://www.kuro5hin.org"><img src="/images/header/kuro5hin2.gif" width="298" height="60" border="0" ALT="Kuro5hin.org: technology and culture, from the trenches"></a></td>
                <td height="47"> </td>
        </tr>
        <tr>
                <td align="right" valign="bottom"><font face="Verdana, arial, sans-serif" size="1"><A HREF="/newuser">create account</a> | <A HREF="/special/faq">help/FAQ</a> | <A HREF="/special/contact">contact</a> | <A HREF="/special/links">links</a> | <A HREF="/find">search</a> | <A HREF="/special/irc">IRC</a> | <A HREF="/section/sitenews">site news</a></font></td>
        </tr>
        <tr>
                <td align="right" valign="middle"></td>
        </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="98%" height="22" bgcolor="#eeeeee" align="center">
        <tr height="22">
                <td background="/images/header/table_bkg3.gif" align="left" height="22" valign="top"><a href="http://www.kuro5hin.org"><img src="/images/header/left_edge3.gif" width="67" height="22" border="0" alt="["></a></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22" width="5"><img src="/images/header/spacer3.gif" width="1" border="0" height="22" ALT=""></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22"><strong><font face="Verdana, arial, sans-serif" size="1"><A CLASS="header" HREF="/section/__all__">Everything</a></font></strong></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22" width="5"><img src="/images/header/spacer3.gif" width="1" height="22" border="0" ALT="|"></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22"><font face="Verdana, arial, sans-serif" size="1"><A CLASS="header" HREF="/section/Diary">Diaries</a></font></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22" width="5"><img src="/images/header/spacer3.gif" width="1" height="22" border="0" ALT="|"></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22"><font face="Verdana, arial, sans-serif" size="1"><A CLASS="header" HREF="/section/tech">Technology</a></font></td>
				<td background="/images/header/table_bkg3.gif" align="center" height="22" width="5"><img src="/images/header/spacer3.gif" width="1" height="22" border="0" ALT="|"></td>
				<td background="/images/header/table_bkg3.gif" align="center" height="22"><font face="Verdana, arial, sans-serif" size="1"><A CLASS="header" HREF="/section/science">Science</a></font></td>              
				<td background="/images/header/table_bkg3.gif" align="center" height="22" width="5"><img src="/images/header/spacer3.gif" width="1" height="22" border="0" ALT="|"></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22"><font face="Verdana, arial, sans-serif" size="1"><A CLASS="header" HREF="/section/culture">Culture</a></font></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22" width="5"><img src="/images/header/spacer3.gif" width="1" height="22" border="0" ALT="|"></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22" nowrap><font face="Verdana, arial, sans-serif" size="1"><A CLASS="header" HREF="/section/fnp">Politics</a></font></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22" width="5"><img src="/images/header/spacer3.gif" width="1" height="22" border="0" ALT="|"></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22"><font face="Verdana, arial, sans-serif" size="1"><A CLASS="header" HREF="/section/media">Media</a></font></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22" width="5"><img src="/images/header/spacer3.gif" width="1" height="22" border="0" ALT="|"></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22"><font face="Verdana, arial, sans-serif" size="1"><A CLASS="header" HREF="/section/news">News</a></font></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22" width="5"><img src="/images/header/spacer3.gif" width="1" height="22" border="0" ALT="|"></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22"><font face="Verdana, arial, sans-serif" size="1"><A CLASS="header" HREF="/section/internet">Internet</a></font></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22" width="5"><img src="/images/header/spacer3.gif" width="1" height="22" border="0" ALT="|"></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22" nowrap><font face="Verdana, arial, sans-serif" size="1"><A CLASS="header" HREF="/section/op-ed">Op-Ed</a></font></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22" width="5"><img src="/images/header/spacer3.gif" width="1" height="22" border="0" ALT="|"></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22"><font face="Verdana, arial, sans-serif" size="1"><A CLASS="header" HREF="/section/fiction">Fiction</a></font></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22" width="5"><img src="/images/header/spacer3.gif" width="1" height="22" border="0" ALT="|"></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22"><font face="Verdana, arial, sans-serif" size="1"><A CLASS="header" HREF="/section/Meta">Meta</a></font></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22" width="5"><img src="/images/header/spacer3.gif" width="1" height="22" border="0" ALT="|"></td>
                <td background="/images/header/table_bkg3.gif" align="center" height="22"><font face="Verdana, arial, sans-serif" size="1"><A CLASS="header" HREF="/section/mlp">MLP</a></font></td>
                <td background="/images/header/table_bkg3.gif" align="right" height="22"><img src="/images/header/rt_edge3.gif" width="1" height="22" border="0" alt="]"></td>
        </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="98%" align="center">
	<tr>
		<td align="right">
<font face="Verdana, arial, sans-serif" size="1"><b>We need your support:</b> <a href="/submitad">buy an ad</a> | 
<a href="/subscribe">premium membership</a> | <a href="http://www.jinxgear.com/kuro5hin">k5 store</a></font>
</td>
	</tr>
</table>
<!--End Header -->
    <!-- End standard logo/sections header -->
    
    <P>

    <!-- Story stuff -->
    <TABLE WIDTH="98%" BORDER=0 CELLPADDING=5 CELLSPACING=0 ALIGN="center">
      <TR>
        <TD VALIGN="top" WIDTH="75%">
          <!-- begin summary of story -->
<TABLE WIDTH="100%" BORDER=0 CELLPADDING=3 CELLSPACING=0>
	<TR>
		<TD VALIGN="top" WIDTH="12" align="center">
			<center>
			
			<A HREF="/print/2004/2/16/123619/973"><img src="/images/print3.gif" WIDTH="15" HEIGHT="15" ALT="[P]" border=0></A>
			</center>
		</TD>
		<TD WIDTH="100%">
			<FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=3><B><A HREF="/story/2004/2/16/123619/973" style="text-decoration:none;"><font color="#000000">Programming Challenge</font></A> (<A CLASS="section_link" href="/section/Diary">Diaries</a>)</B></FONT><BR>
			<img src="/images/clear.gif" HEIGHT="5" WIDTH="1" ALT=""><br>
			<FONT FACE="arial, Helvetica, Sans-Serif" SIZE=2>By <A HREF="/user/llimllib">llimllib</A> <BR>Mon Feb 16th, 2004 at 12:36:19 PM EST </FONT><BR>
			
			
		</TD>
		<TD ALIGN="right" WIDTH="80">
			<A HREF="/user/llimllib/diary"><IMG SRC="/images/topics/books.jpg" WIDTH="80" HEIGHT="50" ALT="llimllib's Diary" ALIGN="right" BORDER=0></a>
		
		</TD>
	</TR>
	<TR>
		<TD WIDTH="12"><IMG SRC="/images/clear.gif" WIDTH="12" HEIGHT="1" ALT=""></TD>
		<TD COLSPAN=2 CLASS="justified">
			<P>
			<FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>
			
		Think you know about mutexes and semaphores? Read on!
			</FONT>
			</P>
			<P>
			<FONT FACE="arial, Helvetica, Sans-Serif" SIZE=2> </FONT>
			</P>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN=3 HEIGHT=3>
			<HR WIDTH="100%" SIZE=1 NOSHADE>
		</TD>	
	</TR>
</TABLE>
<!-- end summary of story-->

<!-- begin story body -->
<P>
<TABLE WIDTH="100%" BORDER=0 CELLPADDING=3 CELLSPACING=0>
<TR>
<TD WIDTH="12"><IMG SRC="/images/clear.gif" ALT="" WIDTH="12"></TD>
<TD WIDTH="100%" class="justified">


<FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>Semaphores are pretty simple, right? Atomically decrement and test an integer to see if it's locked, atomically increment it to unlock. The P() operation should do the decrementing, and the V() the incrementing. (Dijkstra, the crazy Dutch, defined these operation names to bee Pass and Release, or something like that).<p>
The following implementations of P() and V() are given as the correct ones in my OS textbook. My classmates and I have all discovered that they are not; indeed, P() and V() as given here deadlock. Your task is to help me figure out why. The C code:<p><code>
pthread_mutex_t mutex_s = PTHREAD_MUTEX_INITIALIZER;<br>
pthread_cond_t delay_s = PTHREAD_COND_INITIALIZER;<br>
<br>
void P(int &amp;s) {<br>
&nbsp;&nbsp;pthread_mutex_lock(&amp;mutex_s);<br>
&nbsp;&nbsp;if(--s&lt;0) pthread_cond_wait(&amp;delay_s, &amp;mutex_s);<br>
&nbsp;&nbsp;pthread_mutex_unlock(&amp;mutex_s);<br>
}<br>
<br>
void V(int &amp;s) {<br>
&nbsp;&nbsp;pthread_mutex_lock(&amp;mutex_s);<br>
&nbsp;&nbsp;++s &lt;= 0 ? pthread_cond_signal(&amp;delay_s) : pthread_mutex_unlock(&amp;mutex_s);<br>
}<br>
</code><p>The code I'm using that creates the deadlock simply creates two threads which attempt to use P() and V() as a binary lock around the update of a global variable. I will post it upon request.
</FONT>

</TD>
</TR>
</TABLE>
<P>
<!-- end story body -->
        </TD>
        <TD VALIGN="top" WIDTH="25%">
          <table cellpadding="1" border="0" width="100%" bgcolor="#000000" cellspacing="0">
<tr><td width="100%">
<table cellpadding="1" border="0" width="100%" bgcolor="#006699" cellspacing="0">
<tr><td width="100%">
<FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2 COLOR="#FFFFFF">Sponsors</FONT>
</td></tr></table>
</td></tr></table>
<table cellpadding="1" border="0" width="100%" cellspacing="0">
<tr>
 <td>
  
  <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>
            <a href="http://www.voxel.net/"><img alt="Voxel dot net" height="31" border="0" src="/images/voxel_k5.gif" width="158"></a><br>
<IMG SRC="/images/lidisc.gif" BORDER=0 ALT="o" WIDTH="12" HEIGHT="12"> <font size="-2"><a href="http://voxel.net/index.php?svc.managedserver">Managed Servers</a><br>
<IMG SRC="/images/lidisc.gif" BORDER=0 ALT="o" WIDTH="12" HEIGHT="12"> <a href="http://voxel.net/index.php?svc.rails">Managed Clusters</a><br>
<IMG SRC="/images/lidisc.gif" BORDER=0 ALT="o" WIDTH="12" HEIGHT="12"> <a href="http://voxel.net/index.php?svc.vhost">Virtual Hosting</a></font>
<br>
<center><hr width="60%" size=1 noshade></center>
<table width="100%" border=0 cellpadding=2 cellspacing=0>
 <tr>
  <td colspan=2>
   <center><FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2><strong><a href="http://www.kuro5hin.org/redirect/1491?url=http://www.johncompanies.com">Collocated Linux/FreeBSD Server<br>As low as $45/month</a></strong></FONT></center>
  </td>
 </tr>
 <tr>
  <td valign="top"><IMG SRC="/images/lidisc.gif" BORDER=0 ALT="o" WIDTH="12" HEIGHT="12"></td>
  <td><FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2><font size="-2">Root on your own FreeBSD or Linux server</font></FONT></td>
 </tr>
 <tr>
  <td valign="top"><IMG SRC="/images/lidisc.gif" BORDER=0 ALT="o" WIDTH="12" HEIGHT="12"></td>
  <td><FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2><font size="-2"><strong>Very</strong> fast, triple-homed network</font></FONT></td>
 </tr>
 <tr>
  <td valign="top"><IMG SRC="/images/lidisc.gif" BORDER=0 ALT="o" WIDTH="12" HEIGHT="12"></td>
  <td><FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2><font size="-2">NO hardware or setup fees, unlimited support</font></FONT></td>
 </tr>
 <tr>
  <td colspan=2 align="right"><FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2><font size="-2"><a href="/story/2003/4/14/104336/193">Testimonials from K5 Users</a></font></FONT></td>
 </tr>
</table>
    </td>
</tr>
</table>
<p>
          <TABLE WIDTH="100%" BORDER=0 CELLPADDING=1 CELLSPACING=0 BGCOLOR="#000000">
<TR><TD WIDTH="100%">
<TABLE WIDTH="100%" BORDER=0 CELLPADDING=1 CELLSPACING=0 BGCOLOR="#006699">
<TR><TD WIDTH="100%">
<FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2 COLOR="#FFFFFF">Login</FONT>
</TD></TR></TABLE>
</TD></TR></TABLE>
<TABLE WIDTH="100%" BORDER=0 CELLPADDING=1 CELLSPACING=0>
<TR><TD><FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2><FORM ACTION="/" METHOD="post">
<TABLE BORDER=0 width="100%" align="center" CELLPADDING=1 CELLSPACING=0>
  <TR>
    <TD COLSPAN=2>
	  <CENTER></CENTER>
    </TD>
  </TR>
  <TR>
    <TD COLSPAN=2>
      <CENTER>
      <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>
      <B><A CLASS="light" HREF="/newuser">Make a new account</A></B>
      </FONT>
      </CENTER>
    </TD>
  </TR>
  <TR>
    <TD align="right">
      <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2><SMALL>Username:</SMALL></FONT>
    </TD>
    <TD>
      <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2><SMALL><INPUT TYPE="text" SIZE=12 NAME="uname"></SMALL></FONT>
    </TD>
  </TR>
  <TR>
    <TD align="right">
      <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2><SMALL>Password:</SMALL></FONT>
    </TD>
    <TD>
      <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2><SMALL><INPUT TYPE="password" SIZE=12 NAME="pass"></SMALL></FONT>
    </TD>
  </TR>
  <TR>
    <TD align="right" COLSPAN=2>
      <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>
      <INPUT TYPE="submit" NAME="login" VALUE="Login">
      <INPUT TYPE="submit" NAME="mailpass" VALUE="Mail Password">
      </FONT>
    </TD>
  </TR>
  <TR>
    <TD COLSPAN=2>
      <br><CENTER><FONT FACE="arial, Helvetica, Sans-Serif" SIZE=2><b>Note:</b> You must accept a cookie to log in.</FONT></CENTER>
    </TD>
  </TR>
</TABLE>
</FORM>

</FONT></TD></TR>
</TABLE>
<P>
          
          
          
          
          <TABLE WIDTH="100%" BORDER=0 CELLPADDING=1 CELLSPACING=0 BGCOLOR="#000000">
<TR><TD WIDTH="100%">
<TABLE WIDTH="100%" BORDER=0 CELLPADDING=1 CELLSPACING=0 BGCOLOR="#006699">
<TR><TD WIDTH="100%">
<FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2 COLOR="#FFFFFF">Related Links</FONT>
</TD></TR></TABLE>
</TD></TR></TABLE>
<TABLE WIDTH="100%" BORDER=0 CELLPADDING=1 CELLSPACING=0>
<TR><TD><FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2><IMG SRC="/images/lidisc.gif" BORDER=0 ALT="o" WIDTH="12" HEIGHT="12"> <A CLASS="light" HREF="/?op=section;section=Diary;user=diary_35158">llimllib's Diary</A><BR></FONT></TD></TR>
</TABLE>
<P>
          
        </TD>
      </TR>
    </TABLE>
    <!-- X story stuff -->
    
    <BR>

    <!-- comments -->
    
    
    <CENTER>	
      <TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 ALIGN="center">
    <TR>
        <TD>
                <FORM ACTION="/#" METHOD="post">
                <INPUT TYPE="hidden" NAME="op" VALUE="displaystory">
                <INPUT TYPE="hidden" NAME="sid" VALUE="2004/2/16/123619/973">
                
        <TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 BGCOLOR="#ffffff" align="center">

                <TR>
                        <TD VALIGN="middle" align="center">
                                <FONT FACE="arial, Helvetica, Sans-Serif" SIZE=2>
								View:
                                <SMALL>
                                        <SELECT NAME="commenttype" SIZE=1>
		<OPTION VALUE="mixed">Mixed (default)
		<OPTION VALUE="topical">Topical Only
		<OPTION VALUE="editorial">Editorial Only
		<OPTION VALUE="all">All Comments
		<OPTION VALUE="none">No Comments</SELECT>
                                </SMALL>
                                Display:
                                <SMALL>
                                <SELECT NAME="commentmode" SIZE=1>
		<OPTION VALUE="threaded">Threaded
		<OPTION VALUE="minimal">Minimal
		<OPTION VALUE="nested" SELECTED>Nested
		<OPTION VALUE="flat">Flat
		<OPTION VALUE="flat_unthread">Flat Unthreaded<OPTION VALUE="dthreaded">Dynamic Threaded<OPTION VALUE="dminimal">Dynamic Minimal</SELECT>
                                </SMALL>
                                Sort:
                                <SMALL>
                                <SELECT NAME="commentrating" SIZE=1>
		<OPTION VALUE="unrate_highest">Unrated, then Highest
		<OPTION VALUE="highest">Highest Rated First
		<OPTION VALUE="lowest">Lowest Rated First
		<OPTION VALUE="dontcare" SELECTED>Ignore Ratings
		</SELECT>
                                </SMALL>
                                <SMALL>
                                <SELECT NAME="commentorder" SIZE=1>
		<OPTION VALUE="newest">Newest First
		<OPTION VALUE="oldest">Oldest First
		</SELECT>
                                </SMALL>

<INPUT TYPE="submit" NAME="setcomments" VALUE="Set">
</FONT>
</TD></TR>
</TABLE>
</FORM></TD>
    </TR>
</TABLE>
    </CENTER>

      <TABLE WIDTH="100%" BORDER=0 CELLPADDING=1 CELLSPACING=0>
<TR BGCOLOR="#eeeeee">
<TD align="center" WIDTH="100%"><FONT FACE="arial, Helvetica, Sans-Serif" SIZE=2>
<A CLASS="light" HREF="/story/2004/2/16/123619/973">Programming Challenge</A> | <B>17</B> comments (17 topical, 0 editorial, 0 hidden) 
</FONT>
</TD>
</TR>
</TABLE><FORM NAME="rate" ACTION="/" METHOD="POST">
						<INPUT TYPE="hidden" NAME="sid" VALUE="2004/2/16/123619/973">
						<INPUT TYPE="hidden" NAME="op" VALUE="displaystory">
						<INPUT TYPE="hidden" NAME="pid" VALUE="0"><!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="15"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>P and V</B> (<A HREF="/comments/2004/2/16/123619/973/15?mode=alone;showrate=1#15">none / 1</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/15#15">#15</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:15765">sesquiped</a> on Mon Feb 16th, 2004 at 03:05:22 PM EST<BR> </FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>His P and V don't stand for any English words, but instead for a made-up quasi-Dutch word, &quot;prolagen&quot; (which might mean something like &quot;try to decrease&quot;) and a real Dutch word &quot;verhogen&quot; (&quot;increase&quot;).<BR><BR></FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>
<DL><DT></DT><DD><!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="17"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>Additionally,</B> (<A HREF="/comments/2004/2/16/123619/973/17?mode=alone;showrate=1#17">none / 3</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/17#17">#17</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:35759">it certainly is</a> on Mon Feb 16th, 2004 at 03:17:55 PM EST<BR> <A CLASS="light" HREF="http://www.kyz.uklinux.net/">http://www.kyz.uklinux.net/</A></FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>it's <i>proberen</i>, not prolagen.<BR><br><i>kur0shin.org -- it certainly is</i><p><a href="/comments/2002/11/12/20311/594?cid=127">Godwin's law [...] is impossible to violate except with an infinitely long thread that doesn't mention nazis.</a><BR>[  <A CLASS="light" HREF="/comments/2004/2/16/123619/973/15#15">Parent</A>  ]</FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>


<!-- end comment -->

</DD><DT></DT><DD><!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="16"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>Procure and Vacate</B> (<A HREF="/comments/2004/2/16/123619/973/16?mode=alone;showrate=1#16">none / 2</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/16#16">#16</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:35759">it certainly is</a> on Mon Feb 16th, 2004 at 03:13:20 PM EST<BR> <A CLASS="light" HREF="http://www.kyz.uklinux.net/">http://www.kyz.uklinux.net/</A></FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>are very well known names for obtaining and releasing semaphores or mutexes.<BR><br><i>kur0shin.org -- it certainly is</i><p><a href="/comments/2002/11/12/20311/594?cid=127">Godwin's law [...] is impossible to violate except with an infinitely long thread that doesn't mention nazis.</a><BR>[  <A CLASS="light" HREF="/comments/2004/2/16/123619/973/15#15">Parent</A>  ]</FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>


<!-- end comment -->

</DD></DL>

<!-- end comment -->

<!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="11"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>How 'bout this:</B> (<A HREF="/comments/2004/2/16/123619/973/11?mode=alone;showrate=1#11">none / 1</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/11#11">#11</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:10824">Mr.Surly</a> on Mon Feb 16th, 2004 at 01:45:06 PM EST<BR> </FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2><br>
// wait<br>
void P(int &amp;s) {<br>
&nbsp; pthread_mutex_lock(&amp;mutex_s);<br>
&nbsp; while(s == 0)<br>
&nbsp; &nbsp;pthread_cond_wait(&amp;delay_s, mutex_s);<br>
&nbsp; s--;<br>
&nbsp; pthread_mutex_unlock(&amp;mutex_s);<br>
}<p>
//post<br>
void V(int &amp;s) {<br>
&nbsp; pthread_mutex_lock(&amp;mutex_s);<br>
&nbsp; if (++s &gt; 0)<br>
&nbsp; &nbsp;pthread_cond_signal(&amp;delay_s);<br>
&nbsp; pthread_mutex_unlock(&amp;mutex_s);<br>
}<BR><BR></FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>
<DL><DT></DT><DD><!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="14"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>yup, you implemented awgsilari's changes</B> (<A HREF="/comments/2004/2/16/123619/973/14?mode=alone;showrate=1#14">none / 0</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/14#14">#14</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:35158">llimllib</a> on Mon Feb 16th, 2004 at 01:55:55 PM EST<BR>(<A CLASS="light" HREF="mailto:llimllib at f2o .. org">llimllib at f2o .. org</A>) </FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>basically, i had else unlock; instead of unlock;. I thought that P() would release the lock on mutex_s after the wait, but it block until mutex_s is released, which is a problem.<BR><br>Peace.<BR>[  <A CLASS="light" HREF="/comments/2004/2/16/123619/973/11#11">Parent</A>  ]</FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>


<!-- end comment -->

</DD></DL>

<!-- end comment -->

<!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="8"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>HA HA THATS C++!</B> (<A HREF="/comments/2004/2/16/123619/973/8?mode=alone;showrate=1#8">none / 1</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/8#8">#8</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:30676">noogie</a> on Mon Feb 16th, 2004 at 01:38:40 PM EST<BR>(<A CLASS="light" HREF="mailto:noogie.brownATgmail.com">noogie.brownATgmail.com</A>) </FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2><BR><br><br><i>I'm smarter than the average bear</i><a href=" ">.</a><BR></FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>
<DL><DT></DT><DD><!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="9"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>oh yeah</B> (<A HREF="/comments/2004/2/16/123619/973/9?mode=alone;showrate=1#9">none / 0</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/9#9">#9</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:35158">llimllib</a> on Mon Feb 16th, 2004 at 01:41:13 PM EST<BR>(<A CLASS="light" HREF="mailto:llimllib at f2o .. org">llimllib at f2o .. org</A>) </FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>I forgot to remove the passes by reference. I translated from the C++, which I coded in, to C for simplicity's sake, but I missed that.<p>
Thanks for pointing it out.<BR><br>Peace.<BR>[  <A CLASS="light" HREF="/comments/2004/2/16/123619/973/8#8">Parent</A>  ]</FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>


<!-- end comment -->

</DD></DL>

<!-- end comment -->

<!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="3"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>Dunno,</B> (<A HREF="/comments/2004/2/16/123619/973/3?mode=alone;showrate=1#3">none / 1</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/3#3">#3</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:44480">gabban</a> on Mon Feb 16th, 2004 at 01:03:12 PM EST<BR> </FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>never did any posix programming, but...<br>
<cite>The pthread_cond_wait() function blocks on the specified condition variable, which atomically releases the specified mutex and causes the calling thread to block on the condition variable</cite><br><br>

Wouldn't this make your P() to release the lock twice if it has to wait on s?<br>
And would the mutex be released in V() if the predicate is true?<BR><BR></FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>
<DL><DT></DT><DD><!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="4"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>No.</B> (<A HREF="/comments/2004/2/16/123619/973/4?mode=alone;showrate=1#4">none / 1</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/4#4">#4</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:26951">awgsilyari</a> on Mon Feb 16th, 2004 at 01:05:54 PM EST<BR>(<A CLASS="light" HREF="mailto:moc.wnlaruen@ttocs">moc.wnlaruen@ttocs</A>) </FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2><em>Wouldn't this make your P() to release the lock twice if it has to wait on s?</em><p>
No. pthread_cond_wait() reacquires the mutex before it returns.<p>
<em>And would the mutex be released in V() if the predicate is true?</em><p>
No. And that's the bug. P() is okay, though.<BR><br>--------<br>
<i>Please direct SPAM to john@neuralnw.com</i>
<BR>[  <A CLASS="light" HREF="/comments/2004/2/16/123619/973/3#3">Parent</A>  ]</FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>


<!-- end comment -->

</DD></DL>

<!-- end comment -->

<!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="2"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>The bug is in V()</B> (<A HREF="/comments/2004/2/16/123619/973/2?mode=alone;showrate=1#2">none / 3</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/2#2">#2</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:26951">awgsilyari</a> on Mon Feb 16th, 2004 at 12:58:36 PM EST<BR>(<A CLASS="light" HREF="mailto:moc.wnlaruen@ttocs">moc.wnlaruen@ttocs</A>) </FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>The code doesn't unlock the mutex after signalling the condition.<BR><br>--------<br>
<i>Please direct SPAM to john@neuralnw.com</i>
<BR></FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>
<DL><DT></DT><DD><!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="6"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>damn, that does work</B> (<A HREF="/comments/2004/2/16/123619/973/6?mode=alone;showrate=1#6">none / 0</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/6#6">#6</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:35158">llimllib</a> on Mon Feb 16th, 2004 at 01:31:31 PM EST<BR>(<A CLASS="light" HREF="mailto:llimllib at f2o .. org">llimllib at f2o .. org</A>) </FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>thanks. I still don't understand why it doesn't get unlocked in P() after the signal, though.<BR><br>Peace.<BR>[  <A CLASS="light" HREF="/comments/2004/2/16/123619/973/2#2">Parent</A>  ]</FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>
<DL><DT></DT><DD><!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="10"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>Conditional operator</B> (<A HREF="/comments/2004/2/16/123619/973/10?mode=alone;showrate=1#10">none / 1</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/10#10">#10</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:45246">CwazyWabbit</a> on Mon Feb 16th, 2004 at 01:44:30 PM EST<BR> </FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>That line is (expr) ? (foo) : (bar) so if the expression is true, the mutex unlock will never be called.<p>
It would be clearer if written as an explicit "if" statement.<BR>--<br><sub>"But here's the thing: if people <i>hand</i> me ammunition, what kind of misanthrope would I be if I didn't use it?" - Sarah-Katherine</sub><BR>[  <A CLASS="light" HREF="/comments/2004/2/16/123619/973/6#6">Parent</A>  ]</FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>
<DL><DT></DT><DD><!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="12"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>I changed it for compactness</B> (<A HREF="/comments/2004/2/16/123619/973/12?mode=alone;showrate=1#12">none / 0</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/12#12">#12</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:35158">llimllib</a> on Mon Feb 16th, 2004 at 01:53:32 PM EST<BR>(<A CLASS="light" HREF="mailto:llimllib at f2o .. org">llimllib at f2o .. org</A>) </FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>it's an if() in my original code, but formatting code for K5 is a pain.<p>
I knew that the unlock wasn't getting called, but I thought that it got called in the P() function after the wait got unblocked. I didn't know that the wait needed to reacquire the lock on the mutex to unblock.<BR><br>Peace.<BR>[  <A CLASS="light" HREF="/comments/2004/2/16/123619/973/10#10">Parent</A>  ]</FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>


<!-- end comment -->

</DD></DL>

<!-- end comment -->

</DD><DT></DT><DD><!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="7"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>Because</B> (<A HREF="/comments/2004/2/16/123619/973/7?mode=alone;showrate=1#7">none / 1</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/7#7">#7</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:26951">awgsilyari</a> on Mon Feb 16th, 2004 at 01:38:07 PM EST<BR>(<A CLASS="light" HREF="mailto:moc.wnlaruen@ttocs">moc.wnlaruen@ttocs</A>) </FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>In P, after getting woken up, pthread_cond_wait() has to regain in the mutex before returning. What is happening is that V() is waking up the waiter, which immediately blocks waiting for the mutex. This is deadlock, because the V() routine never released it.<p>
Remember, to wait, you: LOCK; while(!cond) WAIT; UNLOCK;<p>
To wake, you: LOCK; SIGNAL; UNLOCK;<p>
You can get away with an if(--s&lt;0) instead of a while in P(), because you aren't using pthread_cond_broadcast in V(). However it's good practice to always use a while() instead of an if(), to guard a wakeup.<BR><br>--------<br>
<i>Please direct SPAM to john@neuralnw.com</i>
<BR>[  <A CLASS="light" HREF="/comments/2004/2/16/123619/973/6#6">Parent</A>  ]</FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>
<DL><DT></DT><DD><!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="13"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>thanks a lot</B> (<A HREF="/comments/2004/2/16/123619/973/13?mode=alone;showrate=1#13">none / 0</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/13#13">#13</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:35158">llimllib</a> on Mon Feb 16th, 2004 at 01:54:37 PM EST<BR>(<A CLASS="light" HREF="mailto:llimllib at f2o .. org">llimllib at f2o .. org</A>) </FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>I get it now. Enlightenment has ensued.<BR><br>Peace.<BR>[  <A CLASS="light" HREF="/comments/2004/2/16/123619/973/7#7">Parent</A>  ]</FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>


<!-- end comment -->

</DD></DL>

<!-- end comment -->

</DD></DL>

<!-- end comment -->

</DD><DT></DT><DD><!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="5"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>but that's the next statement in P()</B> (<A HREF="/comments/2004/2/16/123619/973/5?mode=alone;showrate=1#5">none / 0</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/5#5">#5</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:35158">llimllib</a> on Mon Feb 16th, 2004 at 01:25:30 PM EST<BR>(<A CLASS="light" HREF="mailto:llimllib at f2o .. org">llimllib at f2o .. org</A>) </FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>when the condition variable gets signalled, doesn't it hit the unlock_mutex at the end of p()?<BR><br>Peace.<BR>[  <A CLASS="light" HREF="/comments/2004/2/16/123619/973/2#2">Parent</A>  ]</FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>


<!-- end comment -->

</DD></DL>

<!-- end comment -->

<!-- comment start -->
<TABLE CELLPADDING=6 CELLSPACING=0 BORDER=0>
<TR><TD width="100%">
<TABLE CELLPADDING=1 CELLSPACING=0 BORDER=0 BGCOLOR="#006699">
  <TR>
    <TD width="100%">
      <TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 BGCOLOR="#eeeeee" width="100%">
        <TR>
          <TD WIDTH="100%"><A NAME="1"></A>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2> <B>Strip all unnecessary code..</B> (<A HREF="/comments/2004/2/16/123619/973/1?mode=alone;showrate=1#1">none / 0</A>) (<A CLASS="light" HREF="/comments/2004/2/16/123619/973/1#1">#1</A>)</FONT> <BR>
          <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>by <A HREF="/user/uid:29427">dublet</a> on Mon Feb 16th, 2004 at 12:52:01 PM EST<BR>(<A CLASS="light" HREF="mailto:dDuUbBlLeEtT aATt DdUuBbLlEeTt DdOoTt OorRgG">dDuUbBlLeEtT aATt DdUuBbLlEeTt DdOoTt OorRgG</A>) <A CLASS="light" HREF="http://dublet.org:8083/">http://dublet.org:8083/</A></FONT>
          </TD>
        </TR>
      </TABLE>
    </TD>
  </TR>
</TABLE>
<BR>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0>
  <TR>
    <TD>
    <FONT FACE="verdana, arial, helvetica, sans-serif" SIZE=2>to create the simplest example where it still exists, and the used platform, including thread library.<BR><br>&rarr; <a href="http://sf.net/project/showfiles.php?group_id=55120">Badger</a>. <a href="http://sf.net/donate/index.php?group_id=55120">Badger</a>. &larr;<BR></FONT>
    </TD>
  </TR>
</TABLE>
</TD></TR></TABLE>


<!-- end comment -->

</FORM><TABLE WIDTH="100%" BORDER=0 CELLPADDING=1 CELLSPACING=0>
<TR BGCOLOR="#eeeeee">
<TD align="center" WIDTH="100%"><FONT FACE="arial, Helvetica, Sans-Serif" SIZE=2>
<A CLASS="light" HREF="/story/2004/2/16/123619/973">Programming Challenge</A> | <B>17</B> comments (17 topical, 0 editorial, 0 hidden) 
</FONT>
</TD>
</TR>
</TABLE>

    <CENTER>	
      <TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 ALIGN="center">
    <TR>
        <TD>
                <FORM ACTION="/#" METHOD="post">
                <INPUT TYPE="hidden" NAME="op" VALUE="displaystory">
                <INPUT TYPE="hidden" NAME="sid" VALUE="2004/2/16/123619/973">
                
        <TABLE BORDER=0 CELLPADDING=0 CELLSPACING=0 BGCOLOR="#ffffff" align="center">

                <TR>
                        <TD VALIGN="middle" align="center">
                                <FONT FACE="arial, Helvetica, Sans-Serif" SIZE=2>
								View:
                                <SMALL>
                                        <SELECT NAME="commenttype" SIZE=1>
		<OPTION VALUE="mixed">Mixed (default)
		<OPTION VALUE="topical">Topical Only
		<OPTION VALUE="editorial">Editorial Only
		<OPTION VALUE="all">All Comments
		<OPTION VALUE="none">No Comments</SELECT>
                                </SMALL>
                                Display:
                                <SMALL>
                                <SELECT NAME="commentmode" SIZE=1>
		<OPTION VALUE="threaded">Threaded
		<OPTION VALUE="minimal">Minimal
		<OPTION VALUE="nested" SELECTED>Nested
		<OPTION VALUE="flat">Flat
		<OPTION VALUE="flat_unthread">Flat Unthreaded<OPTION VALUE="dthreaded">Dynamic Threaded<OPTION VALUE="dminimal">Dynamic Minimal</SELECT>
                                </SMALL>
                                Sort:
                                <SMALL>
                                <SELECT NAME="commentrating" SIZE=1>
		<OPTION VALUE="unrate_highest">Unrated, then Highest
		<OPTION VALUE="highest">Highest Rated First
		<OPTION VALUE="lowest">Lowest Rated First
		<OPTION VALUE="dontcare" SELECTED>Ignore Ratings
		</SELECT>
                                </SMALL>
                                <SMALL>
                                <SELECT NAME="commentorder" SIZE=1>
		<OPTION VALUE="newest">Newest First
		<OPTION VALUE="oldest">Oldest First
		</SELECT>
                                </SMALL>

<INPUT TYPE="submit" NAME="setcomments" VALUE="Set">
</FONT>
</TD></TR>
</TABLE>
</FORM></TD>
    </TR>
</TABLE>
    </CENTER>
    <!-- X comments -->

    <P>
    
        <CENTER>
      <P>

<TABLE CELLPADDING=2 CELLSPACING=0 BORDER=0 align="center" width="500">
<TR>
<TD VALIGN="baseline" align="right">
<A HREF="http://www.kuro5hin.org/"><IMG SRC="/images/kuro5hin.png" WIDTH=88 HEIGHT=31 BORDER=0 ALT="kuro5hin.org"></a>
</td><TD ALIGN="left">
<FONT FACE="verdana, arial, helvetica, sans-serif" SIZE="2">
<FORM NAME="Search" ACTION="/" METHOD="GET">
<INPUT TYPE="hidden" NAME="op" VALUE="search">
<INPUT TYPE="text" SIZE=20 NAME="string"><INPUT TYPE="submit" VALUE="Search"></form></font> 
</td>
</tr>
</table>

      <P>
<center><a href="http://www.kuro5hin.org/backend.rdf"><img src="/images/rssblue.gif" width="29" height="15" border=0 alt="[XML]"></a></center>
      <FONT size=1 color="#303030" face="arial,helvetica">
        All trademarks and copyrights on this page are owned by their respective companies.  The Rest © 2000 - 2003 Kuro5hin.org Inc.<BR>See our <A HREF="http://www.kuro5hin.org/special/legal">legalese page</a> for copyright policies. Please also read our <A HREF="/special/privacy">Privacy Policy</a>.<BR>Kuro5hin.org is powered by <A HREF="http://www.fsf.org">Free Software</a>, including <A HREF="http://apache.org/">Apache</a>, <A HREF="http://www.perl.org/">Perl</a>, and <A HREF="http://www.slackware.com/">Linux</a>, The <A HREF="http://scoop.kuro5hin.org/">Scoop Engine</a> that runs this site is freely available, under the terms of the GPL.<BR>Need some help? Email <A HREF="mailto:help@kuro5hin.org">help@kuro5hin.org</a>.<br>
<a href="http://www.indifferenthonest.com/deadbeat/">Erik Benson</a> is a <a href="http://www.indifferenthonest.com/deadbeat/">deadbeat</a>.
</font>

      <P>

      <TABLE BORDER=0 CELLPADDING=10 CELLSPACING=0 width="90%" align="center">
    <TR>
        <td><A HREF="http://scoop.kuro5hin.org"><IMG SRC="/images/powered_shovel2.gif" ALT="Powered by Scoop" BORDER=0></A></td>
        <TD align="center">
<FONT FACE="arial, Helvetica, Sans-Serif" SIZE=2>

<A HREF="/newuser">create account</a> |
<A HREF="/special/faq">help/FAQ</a> |
<A HREF="/special/mission">mission</a> |
<A HREF="/special/links">links</a> |
<A HREF="/search">search</a> |
<A HREF="/special/irc">IRC</a> |
<A HREF="/special/voting"><B>YOU</b> choose the stories!</a>
</FONT></TD>
        <td align="right"><a href="http://jinxhackwear.com/"><img src="/images/jinxbutton.jpg" border=0 width="88" height="31" alt="K5 Store by Jinx Hackwear"></a> <a href="http://www.newsisfree.com/"><img width="88" height="31" border="0" src="/images/nif_button.gif" alt="Syndication Supported by NewsIsFree"></a></td>
    </TR>
</TABLE>
     </center></BODY>
</HTML>